{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nasync function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"53332129-128929aa08dcf95595eb6ffa3\",\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: 15\n            },\n        })\n        return response.data;\n    }\n    catch (error) {\n        console.log(\"Помилка при запиті:\", error);\n        throw error;\n    }\n}\n\nexport { getImagesByQuery};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst list = document.querySelector('.gallery');\nconst loader = document.querySelector(\".loader\");\nconst loadButton = document.querySelector(\".load-more-btn\");\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt', \n    captionDelay: 250,   \n});\n\nexport function createGallery(images) {\n    const markup = images.map((image) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img \n                    class=\"gallery-image\" \n                    src=\"${image.webformatURL}\" \n                    alt=\"${image.tags}\" \n                />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </li>`;\n    }).join(\"\");\n    list.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    list.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    if(loader) {\n        loader.classList.remove('is-hidden'); \n    }\n}\n\nexport function hideLoader() {\n    if (loader) {\n        loader.classList.add('is-hidden');\n    }\n}\n\nexport function showLoadMoreButton() {\n    if(loadButton) {\n        loadButton.classList.remove('is-hidden');\n    }\n}\n\nexport function hideLoadMoreButton() {\n    if(loadButton) {\n        loadButton.classList.add('is-hidden');\n    }\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet page = 1;       \nlet query = '';\nconst perPage = 15;\n\nconst form = document.querySelector('.form');\nconst loadButton = document.querySelector(\".load-more-btn\");\n\nhideLoadMoreButton();\n\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    const input = e.target.elements['search-text'].value.trim();\n\n    if(!input) {\n        iziToast.error({\n                message: 'The input field is empty',\n        });\n        return;\n    }\n\n    query = input; \n    page = 1;\n\n    clearGallery(); \n    showLoader();\n    hideLoadMoreButton();\n\n    try{\n        const res = await getImagesByQuery(query, page);\n        if(res.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            return;\n        }\n        createGallery(res.hits);\n\n        if (res.totalHits > perPage) {\n            showLoadMoreButton();\n        }\n    }\n    catch(error) {\n            console.log(error);\n            iziToast.error({ message: \"Something went wrong!\" });\n        }\n        finally{\n        hideLoader(); \n        e.target.reset();\n    }\n});\n\nloadButton.addEventListener(\"click\", async (e) => {\n    page += 1;\n\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const res = await getImagesByQuery(query, page);\n        \n        createGallery(res.hits);\n        scrollPage();\n        \n        const totalPages = Math.ceil(res.totalHits / perPage);\n\n        if (page >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({ message: \"Error loading more images\" });\n    } finally {\n        hideLoader();\n    }\n})\n\nfunction scrollPage() {\n    const firstCard = document.querySelector(\".gallery-item\");\n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    }\n}"],"names":["getImagesByQuery","query","page","axios","error","list","loader","loadButton","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","perPage","form","e","input","iziToast","res","scrollPage","totalPages","firstCard","cardHeight"],"mappings":"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"}